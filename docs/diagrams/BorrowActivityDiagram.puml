@startuml
start
:User inputs 'borrow r/Tom b/Cloud Atlas';

'Since the beta syntax does not support placing the condition outside the
'diamond we place it as the true branch instead.

if () then ([valid input])
    :Execute command;
    fork
        :addRecord;
        :updatedFilteredRecordList;
    fork again
        :borrowBook;
        :updatedFilteredReaderList;
        :updatedFilteredBookList;
    end fork
    :borrow success;
else ([input invalid or check condition failed])
    :command invalid;
endif
stop
@enduml
